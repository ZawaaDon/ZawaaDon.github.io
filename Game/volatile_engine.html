<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volatile Engine - ゲームエンジン開発プロジェクト</title>
    <link rel="stylesheet" href="https://unpkg.com/mvp.css">
    <style>
        /* カスタムレイアウト設定 */
        header {
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
        }

        main {
            padding-top: 10px !important;
        }

        hr {
            margin: 20px 0;
        }

        /* 2カラムレイアウト（PC用） */
        @media (min-width: 800px) {
            .layout-container {
                display: flex;
                align-items: flex-start;
                gap: 40px;
            }
            
            /* 左側の目次 */
            aside {
                width: 250px;
                flex-shrink: 0;
                border-right: 1px solid #eee;
                padding-right: 20px;
                position: sticky;
                top: 20px;
                max-height: calc(100vh - 40px);
                overflow-y: auto;
            }
            
            /* 右側のメインコンテンツ */
            .main-content {
                flex-grow: 1;
                text-align: left;
            }
        }

        /* モバイルではスタック */
        @media (max-width: 799px) {
            aside {
                border-bottom: 1px solid #eee;
                padding-bottom: 20px;
                margin-bottom: 20px;
            }
        }

        /* 目次のスタイル */
        aside h3 {
            margin-top: 0;
            font-size: 1.1em;
        }

        aside ul {
            list-style: none;
            padding-left: 0;
        }

        aside ul li {
            margin: 8px 0;
        }

        aside ul ul {
            padding-left: 15px;
            font-size: 0.9em;
        }

        aside a {
            text-decoration: none;
            color: #333;
        }

        aside a:hover {
            text-decoration: underline;
            color: #0066cc;
        }

        /* コンテンツのスタイル */
        .main-content h1,
        .main-content h2,
        .main-content h3,
        .main-content h4,
        .main-content p,
        .main-content ul,
        .main-content ol {
            text-align: left;
        }

        /* 表と図は中央寄せ */
        .main-content table {
            margin-left: auto;
            margin-right: auto;
        }

        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            text-align: left;
        }
        .badge {
            display: inline-block;
            padding: 3px 8px;
            margin: 2px;
            background-color: #e0e0e0;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .phase-complete {
            background-color: #d4edda;
            color: #155724;
        }
        .phase-progress {
            background-color: #fff3cd;
            color: #856404;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <nav>
        <a href="../index.html">← Top</a>
    </nav>

    <header>
        <h1>Volatile Engine</h1>
        <p>C++とOpenGLによる自作ゲームエンジン開発プロジェクト</p>
        <p><small>
            <a href="https://github.com/Yura0326/Volatile" target="_blank">GitHub (Private)</a> | 
            開発開始: 2026年1月
        </small></p>
    </header>

    <main>
        <hr>
        <div class="layout-container">
            <!-- 左側の目次 -->
            <aside>
                <h3>目次</h3>
                <ul>
                    <li><a href="#overview">📖 プロジェクト概要</a></li>
                    <li><a href="#tech-stack">🛠️ 技術スタック</a></li>
                    <li><a href="#architecture">🏗️ アーキテクチャ</a>
                        <ul>
                            <li><a href="#architecture-structure">プロジェクト構造</a></li>
                            <li><a href="#architecture-classes">主要クラス</a></li>
                            <li><a href="#architecture-principles">設計原則</a></li>
                        </ul>
                    </li>
                    <li><a href="#roadmap">🚀 開発ロードマップ</a></li>
                    <li><a href="#controls">🎮 操作方法</a></li>
                    <li><a href="#quality">🔍 コード品質管理</a></li>
                    <li><a href="#issues">🐛 主な課題と解決策</a></li>
                    <li><a href="#links">📚 関連リンク</a></li>
                </ul>
            </aside>

            <!-- 右側のメインコンテンツ -->
            <div class="main-content">
                <section id="overview">
                    <h2>📖 プロジェクト概要</h2>
                    <p>
                        Volatile Engineは、UnityやUnrealに頼らず、ゼロから構築する実験的なゲームエンジンプロジェクトです。
                        <strong>C++17</strong>とOpenGLを使用し、GitHub Copilotによる<strong>AI支援開発</strong>を活用しています。
                    </p>
                    <p><strong>プロジェクトビジョン:</strong></p>
                    <ul>
                        <li>プロダクション品質のゲームエンジンを構築</li>
                        <li>そのエンジンを使って完全なゲームを制作</li>
                        <li>クリーンなアーキテクチャと保守性を重視</li>
                        <li>実装を通じた学習</li>
                    </ul>
                </section>

                <hr>

                <section id="tech-stack">
                    <h2>🛠️ 技術スタック</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>カテゴリ</th>
                                <th>技術</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>言語</strong></td>
                                <td>C++17</td>
                                <td>コアエンジン実装</td>
                            </tr>
                            <tr>
                                <td><strong>グラフィックスAPI</strong></td>
                                <td>OpenGL 3.3 Core</td>
                                <td>レンダリングパイプライン</td>
                            </tr>
                            <tr>
                                <td><strong>ウィンドウ/入力</strong></td>
                                <td>SDL2 (2.32.10)</td>
                                <td>ウィンドウ管理、入力処理</td>
                            </tr>
                            <tr>
                                <td><strong>OpenGLローダー</strong></td>
                                <td>GLAD (0.1.36)</td>
                                <td>OpenGL関数ロード</td>
                            </tr>
                            <tr>
                                <td><strong>数学ライブラリ</strong></td>
                                <td>GLM (1.0.3)</td>
                                <td>ベクトル・行列演算</td>
                            </tr>
                            <tr>
                                <td><strong>画像読み込み</strong></td>
                                <td>stb_image</td>
                                <td>テクスチャロード</td>
                            </tr>
                            <tr>
                                <td><strong>3Dモデル読み込み</strong></td>
                                <td>ASSIMP (6.0.2)</td>
                                <td>.obj/.fbx/.gltf対応</td>
                            </tr>
                            <tr>
                                <td><strong>ビルドシステム</strong></td>
                                <td>CMake (3.20+)</td>
                                <td>クロスプラットフォームビルド</td>
                            </tr>
                            <tr>
                                <td><strong>パッケージ管理</strong></td>
                                <td>vcpkg</td>
                                <td>依存関係管理</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <hr>

                <section id="architecture">
                    <h2>🏗️ アーキテクチャ</h2>
            
                    <h3 id="architecture-structure">プロジェクト構造</h3>
                    <pre><code>Volatile/
├── src/
│   ├── Engine/           # エンジンコア
│   │   ├── Rendering/    # レンダリングシステム
│   │   ├── Scene/        # シーン・GameObject管理
│   │   ├── Core/         # 基本ユーティリティ
│   │   ├── Input/        # 入力システム
│   │   └── Assets/       # アセット管理
│   └── Game/             # ゲームロジック
├── assets/               # ゲームアセット
├── scripts/              # ビルド・チェックスクリプト
└── build/                # ビルド出力</code></pre>

                    <h3 id="architecture-classes">主要クラス</h3>
                    <ul>
                        <li><strong>Camera</strong> - FPSカメラ（Euler角ベース）</li>
                        <li><strong>Shader</strong> - シェーダーコンパイル・Uniform管理</li>
                        <li><strong>Texture</strong> - テクスチャロード（stb_image使用）</li>
                        <li><strong>Mesh</strong> - VAO/VBO/EBO管理</li>
                        <li><strong>GameObject</strong> - コンポーネントベースのエンティティ（Transform + Mesh + Texture）</li>
                        <li><strong>Scene</strong> - GameObjectとライトの管理、ライフサイクル制御</li>
                        <li><strong>Light</strong> - ライティングシステム（Directional/Point/Spot）</li>
                        <li><strong>InputManager</strong> - SDL2入力の抽象化レイヤー（Singletonパターン）</li>
                        <li><strong>Time</strong> - フレーム非依存のタイミング管理</li>
                        <li><strong>Material</strong> - PBR風マテリアルプロパティ</li>
                        <li><strong>ModelLoader</strong> - ASSIMPベースの3Dモデルロード</li>
                    </ul>

                    <h3 id="architecture-principles">設計原則</h3>
                    <ul>
                        <li><strong>RAII</strong> - 自動リソース解放（デストラクタでクリーンアップ）</li>
                        <li><strong>Move Semantics</strong> - 効率的なリソース転送（コピー禁止）</li>
                        <li><strong>Encapsulation</strong> - プライベート状態、パブリックAPI</li>
                        <li><strong>IsValid()</strong> - リソースクラスは生成成功を確認可能</li>
                        <li><strong>GL_CHECK マクロ</strong> - OpenGLエラーのデバッグ検出</li>
                    </ul>
                </section>

                <hr>

                <section id="roadmap">
                    <h2>🚀 開発ロードマップ</h2>

                    <h3>Phase 1: Foundation <span class="badge phase-complete">✅ 完了</span></h3>
                    <ul>
                        <li>✅ OpenGLレンダリングパイプライン（SDL2 + GLAD）</li>
                        <li>✅ コンポーネントベースGameObjectシステム</li>
                        <li>✅ リソース管理（Shader, Texture, Mesh）</li>
                        <li>✅ FPSカメラと入力処理</li>
                        <li>✅ クロスプラットフォームビルドシステム（CMake + vcpkg）</li>
                        <li>✅ 自動コード品質チェック</li>
                    </ul>
                    <p><strong>デモ:</strong> テクスチャ付きキューブ10個、WASD+マウスルックカメラ</p>

                    <h3>Phase 2: Engine Core <span class="badge phase-complete">✅ 完了</span> (2026/01/21)</h3>
                    <ul>
                        <li>✅ ソース構造の再編成（<code>src/Engine/</code>と<code>src/Game/</code>分離）</li>
                        <li>✅ Time Management System（フレーム非依存タイミング）</li>
                        <li>✅ Input System（SDL2入力の抽象化）</li>
                        <li>✅ Scene Management（GameObject階層）</li>
                        <li>✅ Asset Pipeline（ASSIMPモデルロード）</li>
                    </ul>

                    <h3>Phase 3: Advanced Rendering <span class="badge phase-progress">進行中</span></h3>
                    <ul>
                        <li>🔄 Lighting System（Directional, Point, Spot）</li>
                        <li>⏳ PBR Material System</li>
                        <li>⏳ Post-processing Effects</li>
                        <li>⏳ Particle Systems</li>
                    </ul>

                    <h3>Phase 4: Physics & Simulation <span class="badge">予定</span></h3>
                    <ul>
                        <li>⏳ 衝突検出</li>
                        <li>⏳ 剛体物理</li>
                        <li>⏳ オーディオシステム</li>
                        <li>⏳ アニメーションシステム</li>
                    </ul>

            <h3>Phase 5: Tools & Editor <span class="badge">予定</span></h3>
            <ul>
                <li>⏳ ImGui統合</li>
                <li>⏳ レベルエディター</li>
                <li>⏳ プロファイリングツール</li>
                <li>⏳ アセットブラウザ</li>
            </ul>

            <h3>Phase 6: Game Development <span class="badge">予定</span></h3>
            <ul>
                <li>⏳ 完成したエンジンで実際にゲームを制作</li>
                    </ul>
                </section>

                <hr>

                <section id="controls">
                    <h2>🎮 現在の操作方法</h2>
            <table>
                <thead>
                    <tr>
                        <th>キー</th>
                        <th>機能</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><kbd>WASD</kbd></td>
                        <td>カメラ移動（前後左右）</td>
                    </tr>
                    <tr>
                        <td><kbd>Q / E</kbd></td>
                        <td>カメラ上下移動</td>
                    </tr>
                    <tr>
                        <td><kbd>マウス</kbd></td>
                        <td>視点回転</td>
                    </tr>
                    <tr>
                        <td><kbd>F1</kbd></td>
                        <td>シェーダーモード切替（Basic/Lighting）</td>
                    </tr>
                    <tr>
                        <td><kbd>1</kbd></td>
                        <td>ライトタイプ切替</td>
                    </tr>
                    <tr>
                        <td><kbd>F2</kbd></td>
                        <td>ライトギズモ表示</td>
                    </tr>
                    <tr>
                        <td><kbd>ESC</kbd></td>
                        <td>終了</td>
                    </tr>
                </tbody>
                    </table>
                </section>

                <hr>

                <section id="quality">
                    <h2>🔍 コード品質管理</h2>
            <p>
                <code>scripts/check_compliance.py</code>による自動コンプライアンスチェックを実施。
                GitHub ActionsでCIを構成し、全PRでコード品質を検証しています。
            </p>
            <h3>チェック項目</h3>
            <ul>
                <li>RAIIパターンの実装（デストラクタ検証）</li>
                <li>Move Semanticsの実装</li>
                <li>IsValid()メソッドの実装</li>
                <li>適切なカプセル化</li>
                <li>エラーハンドリング</li>
                <li>GL_CHECKマクロ使用</li>
                <li>デバッグログ（<code>#ifdef _DEBUG</code>）</li>
                <li>OpenGL状態のクリーンアップ</li>
                    </ul>
                </section>

                <hr>

                <section id="issues">
                    <h2>🐛 主な課題と解決策</h2>
            
            <h3>日本語Windows環境でのASSIMP導入</h3>
            <p>
                <strong>問題:</strong> 日本語Windows（CP932ロケール）でvcpkg経由のASSIMP導入時、
                pugixml tar.gz展開でUTF-8ファイル名のエラーが発生。
            </p>
            <p>
                <strong>解決策:</strong> WSL2（UTF-8環境）でtar.gz展開後、Windowsのvcpkgでビルド。
                詳細は<a href="https://github.com/Yura0326/Volatile/blob/main/.github/copilot-instructions.md" target="_blank">copilot-instructions.md</a>参照。
            </p>

            <h3>GitHub Actions Unicode対応</h3>
            <p>
                Python スクリプトでUTF-8エンコーディングを強制し、Windows CI環境での文字化けを回避。
            </p>
        </section>

        <hr>

        <section id="links">
            <h2>📚 関連リンク</h2>
            <ul>
                <li><a href="https://github.com/Yura0326/Volatile" target="_blank">GitHub リポジトリ（Private）</a></li>
                <li><a href="https://github.com/Yura0326/Volatile/blob/main/.github/copilot-instructions.md" target="_blank">開発ガイド（copilot-instructions.md）</a></li>
                <li><a href="https://github.com/Yura0326/Volatile/blob/main/README.md" target="_blank">README.md</a></li>
            </ul>
        </section>
            </div>
        </div>
    </main>

    <footer>
        <p><small>Last Updated: 2026/01/21</small></p>
    </footer>
</body>
</html>